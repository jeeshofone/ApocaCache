server {
    listen 80;
    server_name localhost;

    # Root directory for content
    root /usr/share/nginx/html;
    
    # Enable directory listing with custom format
    autoindex on;
    autoindex_format html;
    autoindex_exact_size off;
    charset utf-8;
    
    # Custom directory listing format
    add_before_body /directory-header.html;
    
    location / {
        # Add headers for directory listings
        add_header Content-Type text/html;
        
        # Try serving files directly first
        try_files $uri $uri/ =404;
        
        # Add mock headers for ZIM files
        location ~ \.zim$ {
            add_header Content-Type application/x-zim;
            add_header Content-Length $content_length;
            add_header Last-Modified $date_gmt;
            try_files $uri =404;
        }
    }
    
    # Health check endpoint
    location /health {
        access_log off;
        return 200 'healthy\n';
    }
} 